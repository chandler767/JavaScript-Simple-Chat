<!-- Chat in 10 lines of JavaScript code using PubNub JavaScript V4 SDK -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="description" content="Example of a JavaScript chat app using PubNub JavaScript V4 SDK.">
  		<meta name="keywords" content="JavaScript,PubNub,Chat,chat-room,chatting,SDK,PubSub-sdk,tutorial">
        <meta name="author" content="Chandler Mayo">
        <title>JavaScript Chat | PubNub</title>
    </head>
    <body>
      
        <p>Enter chat and press enter.</p>
        <input id="input" placeholder="Your Message Here"/>
        <p>Chat Output:<p>
        <div id="box"></div>
        <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.23.0.min.js"></script>
        <script type="text/javascript" src="https://darryncampbell-pubnub.github.io/pubnub-demo-utils/js/interactive-demo-interface/v2/demo-interface.js" defer></script>
        <script>(function(){
        	var pubnub = new PubNub({publishKey : 'demo',subscribeKey : 'demo'}); // Your PubNub keys here. Get them from https://dashboard.pubnub.com.
        	var box = document.getElementById("box"), input = document.getElementById("input"), channel = 'chat';
        	pubnub.subscribe({channels: [channel], withPresence: true }); // Subscribe to a channel.
        	pubnub.addListener({message: function(m) {
               	box.innerHTML = (''+m.message).replace( /[<>]/g, '' ) + '<br>' + box.innerHTML; // Add message to page.
                pubnub.getUUID()
                //DEMO: used by the interactive demo
                actionCompleted({
                    action: 'Hit enter to publish your message',
                    debug: false
                })

                
            },
            presence: function(m) {
                actionCompleted({
                    action: 'Open demo in new tab to simulate multiple users',
                    debug: false
                })
                }

                
            });
            if(m.uuid != pubnub.getUUID()) {
                    actionCompleted({
                    action: 'Open demo in new tab to simulate multiple users',
                    debug: false
                })  
                }

        	input.addEventListener('keypress', function (e) {
        	    (e.key.toLocaleLowerCase()) === "enter" && pubnub.publish({ // Publish new message when enter is pressed. 
        	        channel : channel, message : input.value, x : (input.value='')
        	    });
                //DEMO: used by the interactive demo
                actionCompleted({
                    action: 'Enter a message in the chat box',
                    debug: false
                })
                
        	});

           
            
        })();</script>
   </body>
</html>